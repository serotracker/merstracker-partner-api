{
  "openapi": "3.0.1",
  "info": {
    "title": "MERSTracker Partner API Documentation",
    "version": "0.2.0"
  },
  "schemes": ["https"],
  "servers": [{ "url": "https://merstracker-partner-api.vercel.app" }],
  "paths": {
    "/fao/merstracker-primary-estimates": {
      "get": {
        "tags": ["FAO Endpoints"],
        "summary": "Endpoints built to integrate with the FAO's Empres-I dashboard.",
        "description": "Get all of the primary MERS viral and seroprevalence estimates from our database.",
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PrimaryMersEstimate"
                  }
                }
              }
            }
          },
          "500": { "description": "Internal server error" }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "PrimaryMersEstimate": {
        "required": [
          "id",
          "estimateId",
          "primaryEstimateInfo",
          "geographicalAreaSubestimates",
          "ageGroupSubestimates",
          "testUsedSubestimates",
          "animalSpeciesSubestimates",
          "sexSubestimates",
          "timeFrameSubestimates",
          "sampleTypeSubestimates",
          "occupationSubestimates",
          "animalSourceLocationSubestimates",
          "animalSamplingContextSubestimates"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "A MongoDB ObjectId which is unique for this primary estimate.",
            "example": "66b2e8b4a9f12d298701c781"
          },
          "estimateId": {
            "type": "string",
            "description": "A string that is unique to this primary estimate.",
            "example": "151217_SaudiArabia_KingAbdulazizUniversity_Camels_OverallNasal"
          },
          "primaryEstimateInfo": { 
            "oneOf": [
              { "$ref": "#/components/schemas/PrimaryAnimalMersSeroprevalenceEstimateInformation" },
              { "$ref": "#/components/schemas/PrimaryHumanMersSeroprevalenceEstimateInformation" },
              { "$ref": "#/components/schemas/PrimaryAnimalMersViralEstimateInformation" },
              { "$ref": "#/components/schemas/PrimaryHumanMersViralEstimateInformation" }
            ]
          },
          "geographicalAreaSubestimates": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MersGeographicalAreaSubEstimate"
            }
          },
          "ageGroupSubestimates": {
            "type": "array",
            "items": {
              "oneOf": [
                { "$ref": "#/components/schemas/MersHumanAgeGroupSubEstimate" },
                { "$ref": "#/components/schemas/MersAnimalAgeGroupSubEstimate" }
              ]
            }
          },
          "testUsedSubestimates": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MersTestUsedSubEstimate"
            }
          },
          "animalSpeciesSubestimates": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MersAnimalSpeciesSubEstimate"
            }
          },
          "sexSubestimates": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MersSexSubEstimate"
            }
          },
          "timeFrameSubestimates": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MersTimeFrameSubEstimate"
            }
          },
          "sampleTypeSubestimates": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MersSampleTypeSubEstimate"
            }
          },
          "occupationSubestimates": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MersOccupationSubEstimate"
            }
          },
          "animalSourceLocationSubestimates": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MersAnimalSourceLocationSubEstimate"
            }
          },
          "animalSamplingContextSubestimates": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MersAnimalSamplingContextSubEstimate"
            }
          }
        }
      },
      "BasicPrimaryMersEstimateInformation": {
        "required": [
          "id"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "A MongoDB ObjectId which is unique for this primary estimate information entry.",
            "example": "66b2e8b4a9f12d298701c782"
          }
        }
      },
      "PrimaryHumanMersSeroprevalenceEstimateInformation": {
        "allOf": [
          { "$ref": "#/components/schemas/BasicPrimaryMersEstimateInformation" },
          {
            "type": "object",
            "required": [
              "seroprevalence"
            ],
            "properties": {
              "seroprevalence": {
                "type": "number",
                "description": "A number from 0 to 1.00 which represents the seroprevalence as a percentage.",
                "example": 0.44
              },
              "seroprevalence95CILower": {
                "type": "number",
                "description": "A number from 0 to 1.00 which represents the lower bound of the 95% confidence interval for seroprevalence as a percentage.",
                "example": 0.40
              },
              "seroprevalence95CIUpper": {
                "type": "number",
                "description": "A number from 0 to 1.00 which represents the upper bound of the 95% confidence interval for seroprevalence as a percentage.",
                "example": 0.48
              },
              "ageGroup": {
                "type": "array",
                "description": "The age group(s) captured in the study.",
                "items": {
                  "type": "string",
                  "enum": [
                    "Children and youth (0-17 years)",
                    "Adults (18-45 years)",
                    "Adults (46-59 years)",
                    "Seniors (≥60 years)"
                  ],
                  "example": ["Children and youth (0-17 years)", "Seniors (≥60 years)"]
                }
              },
              "sampleFrame": {
                "type": "string",
                "enum": [
                  "Household and community sample",
                  "Marketplace vendor",
                  "Blood donors",
                  "Residual sera",
                  "Outpatient population",
                  "Healthcare workers",
                  "Close contacts of cases",
                  "Travellers/tourism",
                  "Suspected cases",
                  "Multiple populations",
                  "Livestock workers",
                  "Pilgrims",
                  "Quarantine station workers",
                  "Slaughterhouse workers",
                  "Nomadic communities",
                  "Close contacts of camels"
                ],
                "description": "The population sampled in the study.",
                "example": "Close contacts of camels"
              }
            }
          }
        ]
      },
      "PrimaryAnimalMersSeroprevalenceEstimateInformation": {
        "allOf": [
          { "$ref": "#/components/schemas/BasicPrimaryMersEstimateInformation" },
          {
            "type": "object",
            "required": [
              "seroprevalence",
              "animalSpecies",
              "animalType",
              "animalDetectionSettings"
            ],
            "properties": {
              "seroprevalence": {
                "type": "number",
                "description": "A number from 0 to 1.00 which represents the seroprevalence as a percentage.",
                "example": 0.44
              },
              "seroprevalence95CILower": {
                "type": "number",
                "description": "A number from 0 to 1.00 which represents the lower bound of the 95% confidence interval for seroprevalence as a percentage.",
                "example": 0.40
              },
              "seroprevalence95CIUpper": {
                "type": "number",
                "description": "A number from 0 to 1.00 which represents the upper bound of the 95% confidence interval for seroprevalence as a percentage.",
                "example": 0.48
              },
              "animalSpecies": {
                "type": "string",
                "description": "The species of animal that was primarily sampled for this study.",
                "enum": ["CAMEL", "BAT", "CATTLE", "SHEEP", "GOAT"],
                "example": "CAMEL"
              },
              "animalType": {
                "type": "array",
                "description": "Whether the animal is a wild animal or a domestic animal. Includes both values if the population included both.",
                "items": {
                  "type": "string",
                  "enum": ["Domestic", "Wild", "Not reported"],
                  "example": "Domestic"
                }
              },
              "animalDetectionSettings": {
                "type": "array",
                "description": "The population(s) sampled in the study.",
                "items": {
                  "type": "string",
                  "enum": [
                    "Livestock markets",
                    "Abattoirs",
                    "Quarantine",
                    "Farms",
                    "Free-roaming herds",
                    "Other",
                    "Animal contacts of human cases",
                    "Not reported",
                    "Multiple populations"
                  ],
                  "example": "Farms"
                }
              },
              "animalPurpose": {
                "type": "string",
                "description": "A description of the animal's purpose.",
                "example": "Multiple purposes"
              },
              "animalImportedOrLocal": {
                "type": "string",
                "description": "Whether the animal is local or imported.",
                "enum": [
                  "Imported",
                  "Local",
                  "Not reported"
                ],
                "example": "Imported"
              },
              "animalAgeGroup": {
                "type": "string",
                "description": "The age group captured in the study.",
                "enum": [
                  "Juvenile (6 months-2 years)",
                  "Adult (>2 years)",
                  "Neonatal (≤6 months)"
                ],
                "example": "Juvenile (6 months-2 years)"
              }
            }
          }
        ]
      },
      "PrimaryHumanMersViralEstimateInformation": {
        "allOf": [
          { "$ref": "#/components/schemas/BasicPrimaryMersEstimateInformation" },
          {
            "type": "object",
            "required": [
              "positivePrevalence"
            ],
            "properties": {
              "positivePrevalence": {
                "type": "number",
                "description": "A number from 0 to 1.00 which represents the positive viral prevalence as a percentage.",
                "example": 0.44
              },
              "positivePrevalence95CILower": {
                "type": "number",
                "description": "A number from 0 to 1.00 which represents the lower bound of the 95% confidence interval for the positive viral prevalence as a percentage.",
                "example": 0.40
              },
              "positivePrevalence95CIUpper": {
                "type": "number",
                "description": "A number from 0 to 1.00 which represents the upper bound of the 95% confidence interval for the positive viral prevalence as a percentage.",
                "example": 0.48
              },
              "ageGroup": {
                "type": "array",
                "items": {
                  "type": "string",
                  "enum": [
                    "Children and youth (0-17 years)",
                    "Adults (18-45 years)",
                    "Adults (46-59 years)",
                    "Seniors (≥60 years)"
                  ],
                  "description": "The age group(s) captured in the study.",
                  "example": ["Children and youth (0-17 years)", "Seniors (≥60 years)"]
                }
              },
              "sampleFrame": {
                "type": "string",
                "enum": [
                  "Household and community sample",
                  "Marketplace vendor",
                  "Blood donors",
                  "Residual sera",
                  "Outpatient population",
                  "Healthcare workers",
                  "Close contacts of cases",
                  "Travellers/tourism",
                  "Suspected cases",
                  "Multiple populations",
                  "Livestock workers",
                  "Pilgrims",
                  "Quarantine station workers",
                  "Slaughterhouse workers",
                  "Nomadic communities",
                  "Close contacts of camels"
                ],
                "description": "The population sampled in the study.",
                "example": "Close contacts of camels"
              }
            }
          }
        ]
      },
      "PrimaryAnimalMersViralEstimateInformation": {
        "allOf": [
          { "$ref": "#/components/schemas/BasicPrimaryMersEstimateInformation" },
          {
            "type": "object",
            "required": [
              "seroprevalence",
              "animalSpecies",
              "animalType",
              "animalDetectionSettings"
            ],
            "properties": {
              "positivePrevalence": {
                "type": "number",
                "description": "A number from 0 to 1.00 which represents the positive viral prevalence as a percentage.",
                "example": 0.44
              },
              "positivePrevalence95CILower": {
                "type": "number",
                "description": "A number from 0 to 1.00 which represents the lower bound of the 95% confidence interval for the positive viral prevalence as a percentage.",
                "example": 0.40
              },
              "positivePrevalence95CIUpper": {
                "type": "number",
                "description": "A number from 0 to 1.00 which represents the upper bound of the 95% confidence interval for the positive viral prevalence as a percentage.",
                "example": 0.48
              },
              "animalSpecies": {
                "type": "string",
                "description": "The species of animal that was primarily sampled for this study.",
                "enum": ["CAMEL", "BAT", "CATTLE", "SHEEP", "GOAT"],
                "example": "CAMEL"
              },
              "animalType": {
                "type": "array",
                "description": "Whether the animal is a wild animal or a domestic animal. Includes both values if the population included both.",
                "items": {
                  "type": "string",
                  "enum": ["Domestic", "Wild", "Not reported"],
                  "example": "Domestic"
                }
              },
              "animalDetectionSettings": {
                "type": "array",
                "description": "The population(s) sampled in the study.",
                "items": {
                  "type": "string",
                  "enum": [
                    "Livestock markets",
                    "Abattoirs",
                    "Quarantine",
                    "Farms",
                    "Free-roaming herds",
                    "Other",
                    "Animal contacts of human cases",
                    "Not reported",
                    "Multiple populations"
                  ],
                  "example": "Farms"
                }
              },
              "animalPurpose": {
                "type": "string",
                "description": "A description of the animal's purpose.",
                "example": "Multiple purposes"
              },
              "animalImportedOrLocal": {
                "type": "string",
                "description": "Whether the animal is local or imported.",
                "enum": [
                  "Imported",
                  "Local",
                  "Not reported"
                ],
                "example": "Imported"
              },
              "animalAgeGroup": {
                "type": "string",
                "description": "The age group captured in the study.",
                "enum": [
                  "Juvenile (6 months-2 years)",
                  "Adult (>2 years)",
                  "Neonatal (≤6 months)"
                ],
                "example": "Juvenile (6 months-2 years)"
              }
            }
          }
        ]
      },
      "MersGeographicalAreaSubEstimate": {
        "properties": {
          "id": {
            "type": "string",
            "description": "A MongoDB ObjectId which is unique for this subestimate.",
            "example": "66b2e8b4a9f12d298701c786"
          }
        }
      },
      "MersHumanAgeGroupSubEstimate": {
        "properties": {
          "id": {
            "type": "string",
            "description": "A MongoDB ObjectId which is unique for this subestimate.",
            "example": "66b2e8b4a9f12d298701c787"
          }
        }
      },
      "MersAnimalAgeGroupSubEstimate": {
        "properties": {
          "id": {
            "type": "string",
            "description": "A MongoDB ObjectId which is unique for this subestimate.",
            "example": "66b2f3dd71de389275837c29"
          }
        }
      },
      "MersTestUsedSubEstimate": {
        "properties": {
          "id": {
            "type": "string",
            "description": "A MongoDB ObjectId which is unique for this subestimate.",
            "example": "66b2e8b4a9f12d298701c788"
          }
        }
      },
      "MersAnimalSpeciesSubEstimate": {
        "properties": {
          "id": {
            "type": "string",
            "description": "A MongoDB ObjectId which is unique for this subestimate.",
            "example": "66b2e8b4a9f12d298701c789"
          }
        }
      },
      "MersSexSubEstimate": {
        "properties": {
          "id": {
            "type": "string",
            "description": "A MongoDB ObjectId which is unique for this subestimate.",
            "example": "66b2e8b4a9f12d298701c78a"
          }
        }
      },
      "MersTimeFrameSubEstimate": {
        "properties": {
          "id": {
            "type": "string",
            "description": "A MongoDB ObjectId which is unique for this subestimate.",
            "example": "66b2e8b4a9f12d298701c78b"
          }
        }
      },
      "MersSampleTypeSubEstimate": {
        "properties": {
          "id": {
            "type": "string",
            "description": "A MongoDB ObjectId which is unique for this subestimate.",
            "example": "66b2e8b4a9f12d298701c78c"
          }
        }
      },
      "MersOccupationSubEstimate": {
        "properties": {
          "id": {
            "type": "string",
            "description": "A MongoDB ObjectId which is unique for this subestimate.",
            "example": "66b2e8b4a9f12d298701c78d"
          }
        }
      },
      "MersAnimalSourceLocationSubEstimate": {
        "properties": {
          "id": {
            "type": "string",
            "description": "A MongoDB ObjectId which is unique for this subestimate.",
            "example": "66b2e8b4a9f12d298701c78e"
          }
        }
      },
      "MersAnimalSamplingContextSubEstimate": {
        "properties": {
          "id": {
            "type": "string",
            "description": "A MongoDB ObjectId which is unique for this subestimate.",
            "example": "66b2e8b4a9f12d298701c78f"
          }
        }
      }
    }
  }
}